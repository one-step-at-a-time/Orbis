{
  "meta": {
    "project": "Orbis â€” AI Assistant",
    "date": "2026-02-15",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "Orbis is a lightweight React + Vite frontend that provides a multi-provider AI chat assistant with integrated web search and local data management for tasks, finances, habits, and reminders. It runs without auth and stores user keys and data locally for quick experimentation.",
  "core_goals": [
    "Provide an AI chat interface that supports multiple providers (Gemini, Zhipu, SiliconFlow) and web search integration.",
    "Allow users to configure provider API keys locally and switch providers quickly.",
    "Enable the assistant to output actionable JSON actions that can create local data (tasks, finance records, reminders) from chat.",
    "Keep data and API keys persisted locally (LocalStorage) with predictable UX and recoverable failure modes.",
    "Expose manual and automatic web search triggers to enrich AI responses using Brave web search."
  ],
  "features": [
    {
      "name": "Chat Assistant",
      "description": "A multi-provider AI chat interface at /chat where users select AI providers, enter API keys, send messages, receive AI responses (including JSON actions), and trigger web searches.",
      "user_flows": [
        "Navigate to /chat -> Select AI Provider (Gemini) -> Enter API Keys -> Click Save API Key -> Type message in chat input -> Click Send -> See streaming AI response -> Receive AI response with JSON actions -> Click an action button in the response -> See action executed or details shown",
        "Navigate to /chat -> Select AI Provider (Zhipu) -> Enter API Keys -> Type research query in chat input -> Click Send -> Receive AI response with JSON actions that contain a 'web_search' trigger -> See web search triggered automatically -> See enriched response including search results",
        "Navigate to /chat -> Select AI Provider (SiliconFlow) -> Enter API Keys (invalid) -> Click Save API Key -> Type message in chat input -> Click Send -> See API authentication error message -> See suggestion to re-enter API Keys",
        "Navigate to /chat -> Select AI Provider (Gemini) -> Enter API Keys -> Type message asking the assistant to use an external tool -> Click Send -> Receive AI response that refuses to use tools -> See 'model refusal' warning in UI -> Toggle 'force tool usage' heuristic -> Resend message -> Receive AI response with JSON actions",
        "Navigate to /chat -> Select AI Provider (Gemini) -> Enter API Keys -> Type message in chat input -> Click Send -> Trigger manual web search by clicking 'Search' in UI -> See web search request sent to Brave search API -> See search results appended to AI response"
      ]
    },
    {
      "name": "Data Management (local)",
      "description": "Local data management for tasks, finances, habits, and reminders driven by JSON actions returned in chat; data is stored in local context (LocalStorage) and surfaced on the landing page (/).",
      "user_flows": [
        "Navigate to /chat -> Type 'Create task: Buy milk tomorrow' in chat input (Create task via chat) -> Click Send -> Receive AI response with JSON action to create task -> Click Confirm on the 'Create task' action -> See task saved to local data context -> Navigate to / -> See new task listed",
        "Navigate to /chat -> Type 'Log expense $12 for lunch' in chat input (Create finance record via chat) -> Click Send -> Receive AI response with JSON action to create finance record -> Click Confirm on the finance action -> See finance record saved to local data context -> Navigate to / -> See updated finance list/summary",
        "Navigate to /chat -> Type 'Create task: Walk dog' in chat input -> Click Send -> Receive AI response with JSON action -> Click Confirm -> See task not appear in / immediately due to LocalStorage sync edge case -> Reload page -> Navigate to / -> See task listed",
        "Navigate to /chat -> Type 'Create task: Do X' in chat input -> Click Send -> Receive AI response with malformed JSON action -> See validation error message in UI -> See suggestion to edit request or resend message -> Resend corrected request -> Receive valid JSON action -> Confirm and see data saved"
      ]
    }
  ],
  "code_summary": {
    "version": "2",
    "type": "frontend",
    "tech_stack": [
      "Javascript",
      "React",
      "Vite",
      "Lucide React"
    ],
    "routes": [
      {
        "path": "/",
        "file": "src/pages/HomePage.jsx",
        "auth_required": false,
        "description": "Landing page of the application"
      },
      {
        "path": "/chat",
        "file": "src/pages/ChatPage.jsx",
        "auth_required": false,
        "description": "Main chat interface for Orbis assistant"
      }
    ],
    "features": [
      {
        "name": "Chat Assistant",
        "description": "AI Chat interface with multi-provider support (Gemini, Zhipu, SiliconFlow) and Web Search capabilities.",
        "files": [
          "src/pages/ChatPage.jsx",
          "src/hooks/useClaudeChat.js",
          "src/services/aiProviderService.js",
          "src/services/searchService.js"
        ],
        "entry_route": "/chat",
        "user_interactions": [
          "Select AI Provider (Gemini, Zhipu, SiliconFlow)",
          "Enter API Keys",
          "Send text messages",
          "Receive AI responses with JSON actions",
          "Trigger Web Search manually or automatically"
        ],
        "api_calls": [
          {
            "method": "POST",
            "endpoint": "https://conversational.googleapis.com/... (Gemini)"
          },
          {
            "method": "POST",
            "endpoint": "https://api.siliconflow.com/v1/chat/completions"
          },
          {
            "method": "GET",
            "endpoint": "https://api.search.brave.com/res/v1/web/search"
          }
        ],
        "auth_required": false
      },
      {
        "name": "Data Management",
        "description": "Manages tasks, finances, habits, and reminders locally.",
        "files": [
          "src/context/DataContext.jsx"
        ],
        "entry_route": "/",
        "user_interactions": [
          "Create task via chat",
          "Create finance record via chat"
        ],
        "api_calls": [],
        "auth_required": false
      }
    ],
    "known_limitations": [
      {
        "issue": "LocalStorage persistence requires page reload to sync completely in some edge cases (fixed but worth noting)",
        "location": "src/pages/ChatPage.jsx",
        "impact": "UX disruption if keys are not saved correctly"
      },
      {
        "issue": "AI Model refusal to use tools",
        "location": "src/hooks/useClaudeChat.js",
        "impact": "Requires heuristic forcing to bypass model safety training"
      }
    ]
  }
}
